## 哈希表


### 0. 简介


> 哈希表，一种抽象数据结构，是根据映射函数，通过关键字映射到数据记录表中的一种数据结构。这个映射函数称做哈希函数，存放数据记录的数组称做哈希表。 - [1]

哈希表，可以根据关键字快速的存取访问数据，是一种空间换时间的方法。哈希表，通过哈希函数将数据有序的存储在指定大小的顺序结构中。一般来说，哈希函数不是完美的，在通过哈希函数构造哈希表时，可能会出现“冲突”，也就是两个不同的输入对应同一个输出，这个时候就需要“解决冲突”。

哈希表的示意图如下所示：
<center>
<img src='resource/hash_table/img_01.svg'>
</center>
<br>

### 1. 哈希函数

哈希函数能使对一个数据序列的访问过程更加迅速有效，通过哈希函数，数据元素将被更快定位。一个好的哈希函数应该满足两个基本属性：
- 1）计算快
- 2）冲突少

常见的哈希构造函数有：
- 1.**直接定址法**：取关键字或关键字的某个线性函数值为哈希地址。即 ```hash(k) = k``` 或者 ```hask(k) =  a*k + b```，其中 a, b 为常数。
- 2.**数字分析法**：数字分析法就是找出数字的规律，尽可能利用这些数据来构造合适的关键字，确保较低的冲突几率。数字分析法适合于事先知道数字的分布。
- 3.**平方取中法**：取关键字平方后的中间几位为哈希地址。这种方法适合事先不知道数据并且数据长度较小的情况。
- 4.**折叠法**：将关键字分割成位数相同的几部分（最后一部分的位数可以不同），然后取这几部分的叠加和（舍去进位）作为哈希地址。该方法适用于数字位数较多且事先不知道数据分布的情况。
- 5.**随机数法**
- 6.**除留余数法**：取关键字被某个不大于散列表表长 m 的数 p 除后所得的余数为散列地址。不仅可以对关键字直接取模，也可在折叠法、平方取中法等运算之后取模。对 p 的选择很重要，一般取素数或 m，若 p 选择不好，容易产生冲突。

<br>

### 2. 解决冲突

为了知道冲突产生的相同散列函数地址所对应的关键字，必须选用另外的散列函数，或者对冲突结果进行处理。而不发生冲突的可能性是非常之小的，所以通常对冲突进行处理。常用方法有以下几种：
- 1.**开放定址法**：当关键字 key 的哈希地址 ```p=H(key)``` 出现冲突时，以 p 为基础，产生另一个哈希地址 p1，如果 p1 仍然冲突，再以 p 为基础，产生另一个哈希地址 p2， …， 直到找出一个不冲突的哈希地址 pi ，将相应元素存入其中。这种方法有一个通用的哈希函数形式：```Hi=（H（key）+di）% m i=1，2，…，n```。其中 H（key）为哈希函数，m 为表长，di称为增量序列。增量序列的取值方式不同，相应的再散列方式也不同。主要有以下三种
  - 线性探测：di = 1，2，3，…，m-1
  - 二次探测：di = +1<sup>2</sup>, -1<sup>2</sup>, +2<sup>2</sup>, -2<sup>2</sup>, ...
  - 伪随机探测：di = 伪随机数序列。
- 2.**单独链表法**：这种方法的基本思想是将所有哈希地址为 i 的元素构成一个称为同义词链的单链表，并将单链表的头指针存在哈希表的第 i 个单元中，因而查找、插入和删除主要在同义词链中进行。链地址法适用于经常进行插入和删除的情况。
- 3.**双哈希**：
- 4.**再哈希**：这种方法是同时构造多个不同的哈希函数，当哈希地址 ```Hi=RH1(key)``` 发生冲突时，再计算 ```Hi=RH2(key)``` ... 直到冲突不再发生。这种方法不易产生“聚集”（Cluster），但增加了计算时间。
- 5.**建立公共溢出区**：这种方法的基本思想是：将哈希表分为基本表和溢出表两部分，凡是和基本表发生冲突的元素，一律填入溢出表。

<br>

### 3.分析总结
- [ ] 分析 hash 表的适用场景






参考资料：
- [1] [Hash table](https://en.wikipedia.org/wiki/Hash_table)
- [2] [哈希表（Hash Table）与哈希算法](https://www.cnblogs.com/songgj/p/13231256.html)
- [3] [Hash function](https://en.wikipedia.org/wiki/Hash_function)
- [4] [哈希函数的构造方法](https://www.cnblogs.com/gj-Acit/archive/2013/05/06/3062628.html)
- [5] [数据结构与算法：hash冲突解决](https://zhuanlan.zhihu.com/p/29520044)



